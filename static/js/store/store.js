///////////////////////////////////////////////////////////////////////////////
//
// File store
//
///////////////////////////////////////////////////////////////////////////////

//// LIBS /////////////////////////////////////////////////////////////////////

const { Flux } = require('delorean');

//// HELPER ///////////////////////////////////////////////////////////////////

const CHANGE = 'change'; // the only constant is change.

let key = 0;

let state = {
  images : []
};

//// STORE ////////////////////////////////////////////////////////////////////

let Store = Flux.createStore({

  actions : {

    'onNewImage' : 'onNewImage'

  },

  onNewImage(payload) {

    payload.key = ++key;
    state.images.push(payload);
    this.emit(CHANGE);

  },

  getState() {

    return state;

  }

});

//// EXPORTS //////////////////////////////////////////////////////////////////

module.exports = new Store();

///////////////////////////////////////////////////////////////////////////////
